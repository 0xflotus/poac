language: cpp
rvm: system

before_cache:
  - brew cleanup
cache:
  directories:
    - $HOME/Library/Caches/Homebrew
    - /usr/local/Cellar/cvc4/1.6

matrix:
  include:
    # OS X Yosemite (not supported)
#    - os: osx
#      osx_image: xcode6.4
    # OS X El Capitan (not supported)
#    - os: osx
#      osx_image: xcode8
    # macOS Sierra
#    - os: osx
#      osx_image: xcode9.2
#     macOS High Sierra
    - os: osx
      osx_image: xcode10.1

before_install:
  - brew update
install:
  # Install yaml-cpp
  - git clone -q https://github.com/jbeder/yaml-cpp.git
  - mkdir yaml-cpp/build
  - cd yaml-cpp/build
  - cmake ..
  - make
  - make install
  - cd ../../
  - rm -rf yaml-cpp
  # Install cvc4
  - travis_wait 60 brew install cvc4/cvc4/cvc4
  - brew link cvc4/cvc4/cvc4
  # Install symfpu
  - pushd /usr/local/include
  - git clone -q https://github.com/martin-cs/symfpu.git -b CVC4
  - popd
script:
  - mkdir build
  - cd build
  - XCODE_VERSION=$(xcodebuild -version | head -n1 | cut -d ' ' -f 2) cmake ..
  - make install
  - poac -h

notifications:
  email: false
  slack:
    secure: "nqHD1JbBqeRa9XfZMo5tx2uNsGcKdb8g1kTiwhUCQKJdR5MQbiHsvA3lDZntaowXTlA1UmFQDUPsEZoQF8kvEVqX/kntY3K85OOE7wbX04YCFOgKxUvuKEEJKda0aIFESP7AIe/fABQJuo1VXrEJHJY0LQXQBovawUmTU3cAP54NpU1UYZaNvhrokBlLDo25dX4Cy7ucEEGM3+kFSZUBgA0lqO8lkp/kLAUsRJui6yFqdeG1OBj/tRGg7zaY+UryT41W+RvgPLxwMlV0Lm+/rj/67C8HTDFSTIJHHwgX1Lm60qsfNpFdjJdn+gQVPNYmvIZD79feRnJIjLc3SvOGca+8qdLAiG5VFlsZP7hFHHoZxRcP93qqiopZl2lCHi1Bn8/fzDCCOXEEEEJGeV3I7jpSw2jlZe9Xvj+wFNFOVhiLSiiWhLAtrcClXAvp3GtOrpRAlcjAz/jMTsAzfhU8LA/PIRsFaNayqQAn8C4zKDXX3tQ9ZmSFQkXx3rOPvMtssUkrhcPPuR1pqBPZxoR2HAS47taHQlpHuPD13ogB+E33ICwCH2O+OKBua0dnyERj8w3l6GnBtNToz7Vu3k5LXCaTWk19D6D9azxDAcZDvWLM+EmUoy5RmgA2iWtG4avrrRf+6/ngyJnZJmpklsFGZ3q7etZFCtVQkbgCp4VVazM="
