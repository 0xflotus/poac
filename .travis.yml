language: cpp
rvm: system

before_cache:
  - brew cleanup
cache:
  directories:
    - $HOME/Library/Caches/Homebrew
    - /usr/local/Cellar/cvc4/1.6

matrix:
  include:
    # OS X Yosemite (not supported)
#    - os: osx
#      osx_image: xcode6.4
    # OS X El Capitan (not supported)
#    - os: osx
#      osx_image: xcode8
    # macOS Sierra
#    - os: osx
#      osx_image: xcode9.2
#     macOS High Sierra
    - os: osx
      osx_image: xcode10.1

before_install:
  - brew update
install:
  # Install yaml-cpp
  - git clone -q https://github.com/jbeder/yaml-cpp.git
  - mkdir yaml-cpp/build
  - cd yaml-cpp/build
  - cmake ..
  - make
  - make install
  - cd ../../
  - rm -rf yaml-cpp
  # Install cvc4
  - travis_wait 60 brew install cvc4/cvc4/cvc4
  - brew link cvc4/cvc4/cvc4
  # Install symfpu
  - pushd /usr/local/include
  - git clone -q https://github.com/martin-cs/symfpu.git -b CVC4
  - popd
script:
  - mkdir build
  - cd build
  - XCODE_VERSION=$(xcodebuild -version | head -n1 | cut -d ' ' -f 2) cmake ..
  - make install
  - poac -h

notifications:
  email: false
  slack:
    secure: s/sMaTfcjJET/EAZFarqlqVsoNEJ86kTP+uRJxQoKdEGa4SvKgOX5Q5dWmBQfmKBrijQhsNTUybSlaLkZ/l3doWpKJLT2FKDkQgU663glEIfAeYDtkxacVaILQb2gEYID+W/MyfRYULs4NtwEjWjPJ9Cy9MfTU36rAVKRRfppM4VzhFfifmEmoAAM/f1vBBwRPbIF2B8Zpx3zPyh2ftcR2V9wupwIUpWKQ9i92IMsNKSx0LH8KGKfhFfo+1llY5yuNCUOGDSe95t3/3xVeKEWaVqm8ePcmKgmmniSSv4c7CalpoWI10s4HjU8x1f9dANfVJhCEV+lxRt/BeEgxAho72kUO1xZEXNckbHT45HnrQlCn1tvBj828oEj6d2kdB16F8mfOo/9Nir0pdXLYCZ3YvRcHnwodzGBDN3uDdhPs+ar9n12lfbsh7padyHifCj/iamQxUcyLGyqvbw6w8FC640s23rqp1Fj7s9jXCFPwbpw0mGT+Hc1Qlu6uyPPcz4y4x0vWujimqg3EYCn7/cfu9/NrzxyeJBZcRvUxaCKuS+DNt5nFfmy4R9BabWYz+KzjM6vkm8LN4GKdOmfIQeqFf6eJDDRnPqMfTfHrq8oZCGGJrfCAAWtaJb+Y0ypHG3plGDBx3B7YuVXs3tVGQGhYzVA7AEazwH9ewJEejhdwM=
